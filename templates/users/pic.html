{% extends 'include/homepage.html' %}
{% load static %}
{% block content %}
{% include 'include/header.html' %}

    <div class="contaibner-fluid bg-estimation bg-100 bg-tips">
        <div class="container bg-100 profil-content">

            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3 profil-content" style="margin-top:25px;">

                <a href="{% url 'profile' user.username %}" class="btn btn-default3 full-input profil-content bot-10">
                    {% if user.profile_image %}
                    <img class="img-circle img-responsive circle-border img-switch"
                        src="{{ user.profile_image.url }}">
                    {% else %}
                    <img class="img-circle img-responsive circle-border img-switch"
                        src="{% static 'assets/images/profil.jpg' %}">
                    {% endif %}
                    <p><b>Profile</b></p>
                </a>
    
    
                <a href="{% url 'profile_image' user.username %}">
                    <button type="submit" class="btn btn-default3 full-input profil-content bot-10">
                        <b>Profile picture</b>
                    </button>
                </a>
    
                <a href="{% url 'edit' user.username %}" class="active-color">
                    <button type="submit" class="btn btn-default3 full-input profil-content bot-10">
                        <b>Your details</b>
                    </button>
                </a>
    
    
            </div>
            

            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-9 bg-estimation top-40 box-border bg-80">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 title-bg blk-header">
                    <h3 class="profil-content">Profile picture</h3>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 top-border">
                    <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 profil-content">
                        {% if user.profile_image %}
                        <img class="img-responsive img-circle"
                            src="{{ user.profile_image.url }}">
                        {% else %}
                        <img class="img-responsive img-circle"
                            src="{% static 'assets/images/profil.jpg' %}">
                        {% endif %}
                    </div>
                    <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8 profil-content">
                        <p>A good picture where we can recognise you allow hosts and guests to know each other. Nobody
                            wants to receive a landscape for dinner!</p>
                        <p>Select a picture that clearly shows your face at the centre.</p>
                        <p>Minimum resolution: 400 x 400 pixels</p>


                        <img class="photoinscription fsm-thumbnail img-responsive" style="z-index:1">

                        <form name="form" method="post" enctype="multipart/form-data">
                            {% csrf_token %}

                            <input type="file" id="form_profile_image" name="profile_image" required="required"
                                class="inputfilephotoinscription" onchange="readURL(this)" style="display:none">

                            <button class="btn btn-default btn-pink-photo b10" id="buttonFileSelect"onclick="selectPhoto(event)">
                                <span class="glyphicon glyphicon-picture"></span>
                                Parcourir
                            </button>
                            <div class="form-group">
                                <button type="submit" id="form_save"
                                    class="btn-default btn">modifier</button></div><input type="hidden" id="form__token">
                        </form>

                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        function initialize() {
            // Create the search box and link it to the UI element.
            var input = document.getElementById('location');
            var searchBox = new google.maps.places.SearchBox(input);

            // [START region_getplaces]
            // Listen for the event fired when the user selects a prediction and retrieve
            // more details for that place.
            //searchBox.addListener('places_changed', function() {
            //  console.log("ok")
            //});
        }
        
    /*
        $(function() {
            if (sessionStorage.getItem('photoinscriptionsrc') !== null) {
                $('.fsmphotoinscription').attr('src', sessionStorage.getItem('photoinscriptionsrc'));
                $('.fa-user').css('z-index', '0');
            }
        });
        */
        function selectPhoto(e) {
            e.preventDefault();
            $('.inputfilephotoinscription').click();
        }
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('.fa-user').css('z-index', '0');
                    $('.photoinscription').attr('src', e.target.result);
                    sessionStorage.setItem('photoinscriptionsrc', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    
    </script>


{% include 'include/footer.html' %}
{% endblock %}