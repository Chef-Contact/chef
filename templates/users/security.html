{% extends 'include/homepage.html' %} 
{% load static %} 
{% block content %} 
{%include 'include/header.html' %}
<style>
        .profil-content .form-group{
            position: relative;
        }
    .profil-content .form-group img{
        position: absolute;
        top: 50%;
        right: 3%;
        width: 20px;
        height: 20px;
        transform: translateY(-50%);
        object-fit: contain;
    }
</style>
<div
  class="contaibner-fluid bg-estimation bg-tips"
  style="margin-bottom: -15px"
>
  <div class="container profil-content">
    <div
      class="col-xs-12 col-sm-4 col-md-4 col-lg-3 profil-content"
      style="margin-top: 25px"
    >
      <a
        href="{% url 'profile' user.username %}"
        class="btn btn-default3 full-input profil-content bot-10"
      >
        {% if user.profile_image %}
        <img
          class="img-circle img-responsive circle-border img-switch"
          src="{{ user.profile_image.url }}"
        />
        {% else %}
        <img
          class="img-circle img-responsive circle-border img-switch"
          src="{% static 'assets/images/profil.jpg' %}"
        />
        {% endif %}
        <p><b>Profile</b></p>
      </a>

      <a href="{% url 'profile_image' user.username %}">
        <button
          type="submit"
          class="btn btn-default3 full-input profil-content bot-10"
        >
          <b>Profile picture</b>
        </button>
      </a>

      <a href="{% url 'edit' user.username %}" class="active-color">
        <button
          type="submit"
          class="btn btn-default3 full-input profil-content bot-10"
        >
          <b>Changing your password</b>
        </button>
      </a>

      {% if user.user_role == "chef" %}
      <a href="{% url 'shop_edit' user.username %}" class="active-color">
        <button
          type="submit"
          class="btn btn-default3 full-input profil-content bot-10"
        >
          <b>Website settings</b>
        </button>
      </a>
      {% endif %}
      <a href="{% url 'shop_edit' user.username %}" class="active-color">
        <button
          type="submit"
          class="btn btn-default3 full-input profil-content bot-10"
        >
          <b>Security</b>
        </button>
      </a>
    </div>

    <form
      name="fos_user_profile_form"
      method="post"
      action=""
      class="fos_user_profile_edit"
    >
      {% csrf_token %}
      <div
        class="col-xs-12 col-sm-8 col-md-8 col-lg-9 bg-estimation top-40 box-border"
      >
        <div
          class="col-xs-12 col-sm-12 col-md-12 col-lg-12 title-bg blk-header"
        >
          <h3 class="profil-content">Password settings</h3>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 top-border" bis_skin_checked="1">
                    
            <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3 top-20 profil-content" bis_skin_checked="1">
                <p class="pull-right" style="padding-top:7px; margin-bottom:0"><label class="control-label required" for="fos_user_profile_form_password">Current Password</label></p>
            </div>
            

            <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9 top-20 profil-content" bis_skin_checked="1">

                <div class="form-group" bis_skin_checked="1"><input type="password" id="fos_user_profile_form_password" name="password" required="required" class="form-control">
                
                    <img src="{% static 'assets/img/hide.png' %}" alt="">
                </div>
            </div>


            <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3 top-20 profil-content" bis_skin_checked="1">
                <p class="pull-right" style="padding-top:7px; margin-bottom:0"><label class="control-label required" for="fos_user_profile_form_new_password">New Password</label></p>
            </div>
          
            <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9 top-20 profil-content" bis_skin_checked="1">

                <div class="form-group" bis_skin_checked="1">
                    <input type="password" id="fos_user_profile_form_new_password" name="new_password" required="required" class="form-control">
                
                    <img src="{% static 'assets/img/hide.png' %}" alt="">
                
                </div>
            </div>

            <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3 top-20 profil-content" bis_skin_checked="1">
                <p class="pull-right" style="padding-top:7px; margin-bottom:0"><label class="control-label required" for="fos_user_profile_form_confirm_password">Repeat the new password
                </label></p>
            </div>
            

            <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9 top-20 profil-content" bis_skin_checked="1">

                <div class="form-group" bis_skin_checked="1"><input type="password" id="fos_user_profile_form_confirm_password" name="confirm_password" required="required" class="form-control">
                
                <img src="{% static 'assets/img/hide.png' %}" alt="">
                </div>
            </div>


        </div>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3"></div>

      <input
        type="submit"
        class="btn btn-danger btn-lg pull-right top-20 bot-40"
        value="Save"
        name="update_password"
      />
    </form>
  </div>
</div>

<script>

  function initialize() {
    // Create the search box and link it to the UI element.
    var input = document.getElementById("location");
    var searchBox = new google.maps.places.SearchBox(input);

    // [START region_getplaces]
    // Listen for the event fired when the user selects a prediction and retrieve
    // more details for that place.
    //searchBox.addListener('places_changed', function() {
    //  console.log("ok")
    //});
  }


  const all_pass_inps = document.querySelectorAll('.profil-content .form-group img')
  for(let i =0;i<all_pass_inps.length;i++){
    let is = true
    all_pass_inps[i].onclick = ()=>{
        all_pass_inps[i].parentElement.children[0].type =  all_pass_inps[i].parentElement.children[0].type ==='text'?'password':'text'
        is = is?false:true
        all_pass_inps[i].parentElement.children[1].src = is?'/static/assets/img/hide.png':'/static/assets/img/show.png'
    }
  }
</script>

{% include 'include/footer.html' %} {% endblock %}
